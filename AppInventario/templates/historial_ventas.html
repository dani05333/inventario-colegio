{% extends 'inicio.html' %}

{% block content %}
<div class="container my-5">
    <h2>Historial de Ventas</h2>
    <table id="tabla-ventas" class="table table-striped table-bordered" style="width:100%">
        <thead class="table-primary text-center">
            <tr>
                <th>Fecha</th>
                <th>Cantidad</th>
                <th>Producto</th>
                <th>Talla</th>
                <th>Colegio</th>
                <th>Subtotal</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>
{% endblock %}

{% block extra_scripts %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css" />

<script>
$(document).ready(function() {
    $('#tabla-ventas').DataTable({
        serverSide: true,
        processing: true,
        ajax: {
            url: "{% url 'historial_ventas_json' %}",
            type: "GET"
        },
        columns: [
            { data: 'fecha' },
            { data: 'cantidad', className: 'text-center' },
            { data: 'producto' },
            { data: 'talla', className: 'text-center' },
            { data: 'colegio', className: 'text-center' },
            { data: 'subtotal', className: 'text-center' }
        ],
        language: {
            url: '//cdn.datatables.net/plug-ins/1.13.4/i18n/es-ES.json'
        },
        order: [[0, 'desc']]
    });
});
</script>
{% endblock %}
